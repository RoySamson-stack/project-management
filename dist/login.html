<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCRK</title>
  </head>
  <body>
    <h1>Login</h1>

    <div id="LoginScreen">
      <button id="login">Google login</button>
    </div>

    <div id="dashboard">
      <div id="userDetails"></div>
      <button id="logout">Logout</button>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <script>// Your web app's Firebase configuration
var config = {
    apiKey: "AIzaSyDmOzvLfbJ74Ftv0QWQmdpoaE1LzNPUlo0",
    authDomain: "project-management-53eab.firebaseapp.com",
    databaseURL: "https://project-management-53eab-default-rtdb.firebaseio.com",
    projectId: "project-management-53eab",
    storageBucket: "project-management-53eab.appspot.com",
    messagingSenderId: "61242591551",
    appId: "1:61242591551:web:d1707b994cb68028d1ab8a"
};
firebase.initializeApp(config);
document.getElementById("dashboard").style.display = "none";
document.getElementById("login").addEventListener("click", GoogleLogin);
document.getElementById("logout").addEventListener("click", LogoutUser);
let provider = new firebase.auth.GoogleAuthProvider();
function GoogleLogin() {
    console.log("Login Btn Call");
    firebase.auth().signInWithPopup(provider).then((res)=>{
        console.log(res.user);
        document.getElementById("LoginScreen").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        showUserDetails(res.user);
    }).catch((e)=>{
        console.log(e);
    });
}
function showUserDetails(user) {
    document.getElementById("userDetails").innerHTML = `
          <img src="${user.photoURL}" style="width:10%">
          <p>Name: ${user.displayName}</p>
          <p>Email: ${user.email}</p>
        `;
}
function checkAuthState() {
    firebase.auth().onAuthStateChanged((user)=>{
        if (user) {
            document.getElementById("LoginScreen").style.display = "none";
            document.getElementById("dashboard").style.display = "block";
            showUserDetails(user);
        }
    });
}
function LogoutUser() {
    console.log("Logout Btn Call");
    firebase.auth().signOut().then(()=>{
        document.getElementById("LoginScreen").style.display = "block";
        document.getElementById("dashboard").style.display = "none";
    }).catch((e)=>{
        console.log(e);
    });
}
checkAuthState();

</script>
  <script src="/login.0c611bc6.js"></script></body>
</html>
